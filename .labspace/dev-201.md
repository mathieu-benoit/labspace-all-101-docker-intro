## Dev 201

Needs to be a dedicated labspace, for now here.

### Prerequisites

```bash
git clone https://github.com/dockersamples/catalog-service-node
cd catalog-service-node
```

```bash
docker pull postgres:alpine
docker pull node:alpine
docker pull dhi.io/node:24-alpine3.23
```

```bash
docker rm -f $(docker ps -qa)
```

### Demos

#### Demo #1 - `docker run|ps`

```bash
docker run -d postgres:alpine
```

```bash
docker run -it --rm node:alpine sh
```

```bash
node --version
```

```bash
wget --spider docker.com
```

```bash
exit
```

```bash
docker ps
```

```bash
docker ps -a
```

#### Demo #2 - `docker run|exec`

```bash
docker run -d -it node:alpine node
```

```none
docker exec -it FIXME sh
```

```bash
ps aux
```

```bash
exit
```

```bash
docker run -d -it dhi.io/node:24-alpine3.23 sh
```

```bash
docker run -d -it dhi.io/node:24-alpine3.23 node
```

```none
docker exec -it FIXME sh
```

Not working, need to show that in Docker Desktop:
```none
docker debug FIXME
```

```bash
docker ps
```

```none
docker logs FIXME
```

```bash
docker ps -a
```

```none
docker exec FIXME sh
```

```none
docker logs FIXME
```

--> Go to Docker Desktop to show logs, exec and debug.

#### Demo #3 - `docker run -e -v`

```bash
docker run -d -e POSTGRES_PASSWORD=demo \
    postgres:alpine
```

```none
docker exec -it FIXME sh
```

```bash
psql -h localhost -U postgres
```

```bash
SELECT * FROM pg_catalog.pg_tables;
```

```bash
docker run -d -e POSTGRES_PASSWORD=demo \
    -v ./dev/db:/docker-entrypoint-initdb.d \
    -v db-data:/var/lib/postgresql/data \
    postgres:alpine
```

```none
docker exec -it FIXME sh
```

```bash
psql -h localhost -U postgres
```

```bash
SELECT * FROM pg_catalog.pg_tables;
```

```bash
exit
```

Open the :fileLink[`1-create-schema.sql`]{path="catalog-service-node/dev/db/1-create-schema.sql"} file.

```bash
vi docker-entrypoint-initdb.d/1-create-schema.sql
```

```bash
exit
```

#### Demo #4 - `docker network`

```bash
docker network create demo
```

```bash
docker network list
```

```bash
docker run -d -e POSTGRES_PASSWORD=demo \
    -p 5432:5432 \
    -v ./dev/db:/docker-entrypoint-initdb.d \
    -v db-data:/var/lib/postgresql/data \
    --network demo \
    --network-alias db \
    postgres:alpine
```

```bash
psql -h localhost -p 5432 -U postgres
```

```bash
docker run --rm -ti postgres:alpine psql -h localhost -p 5432 -U postgres
```

```bash
docker run --rm -ti --network demo postgres:alpine psql -h localhost -p 5432 -U postgres
```

```bash
docker run --rm -ti --network demo postgres:alpine -h db -p 5432 -U postgres sh
```

#### Demo #5 - `docker compose`

```bash
docker rm -f $(docker ps -qa)
```

Open the :fileLink[`compose.yaml`]{path="catalog-service-node/compose.yaml"} file.

```bash
docker compose up
```

```bash
docker compose up -d
```

Show Docker Desktop.